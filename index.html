<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Liminale Definitivo</title>
<style>
body { margin:0; background:black; overflow:hidden; }
</style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
// ===== SCENA =====
const scene = new THREE.Scene();

// CAMERA
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.z = 4;

// RENDERER
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ===== SFERA LIQUIDA =====
const sphereGeo = new THREE.SphereGeometry(1, 128, 128);
const sphereMat = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe:true });
const sphere = new THREE.Mesh(sphereGeo, sphereMat);
scene.add(sphere);

// ===== MICRO-PRESENZE =====
const presenze = [];
for(let i=0;i<20;i++){
    const geo = new THREE.BoxGeometry(Math.random()*0.1+0.05, Math.random()*0.1+0.05, Math.random()*0.1+0.05);
    const mat = new THREE.MeshBasicMaterial({color:0xffffff, transparent:true, opacity:0.3});
    const mesh = new THREE.Mesh(geo, mat);
    mesh.position.set((Math.random()-0.5)*6, (Math.random()-0.5)*6, (Math.random()-0.5)*6);
    scene.add(mesh);
    presenze.push(mesh);
}

// ===== ANIMAZIONE =====
let time = 0;
let mouseX = 0, mouseY = 0;

document.addEventListener('mousemove', e=>{
    mouseX = (e.clientX/window.innerWidth - 0.5)*4;
    mouseY = -(e.clientY/window.innerHeight - 0.5)*4;
});

function animate(){
    requestAnimationFrame(animate);
    time += 0.02;

    // Sfera che respira
    sphere.rotation.y += 0.002;
    sphere.rotation.x += 0.001;
    const scale = 1 + Math.sin(time)*0.08;
    sphere.scale.set(scale, scale, scale);

    // Presenze fluttuanti
    presenze.forEach(p=>{
        p.position.x += (Math.random()-0.5)*0.01;
        p.position.y += (Math.random()-0.5)*0.01;
        p.position.z += (Math.random()-0.5)*0.01;
    });

    // Camera che segue il mouse
    camera.position.x += (mouseX - camera.position.x)*0.05;
    camera.position.y += (mouseY - camera.position.y)*0.05;

    renderer.render(scene, camera);
}

animate();

// ===== RIDIMENSIONAMENTO =====
window.addEventListener('resize', ()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
